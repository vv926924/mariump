window.whatInput=(function(){var c=[];var i;var m=false;var d=null;var y=["button","checkbox","file","image","radio","reset","submit"];var v=e();var k=[16,17,18,91,93];var q={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};q[e()]="mouse";var o=[];var l={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"};var r={2:"touch",3:"touch",4:"mouse"};var j;function g(){s();t(event);m=true;j=window.setTimeout(function(){m=false},650)}function a(z){if(!m){t(z)}}function f(z){s();t(z)}function s(){window.clearTimeout(j)}function t(C){var A=x(C);var D=q[C.type];if(D==="pointer"){D=u(C)}if(d!==D){var E=w(C);var B=E.nodeName.toLowerCase();var z=(B==="input")?E.getAttribute("type"):null;if((!i.hasAttribute("data-whatinput-formtyping")&&d&&D==="keyboard"&&l[A]!=="tab"&&(B==="textarea"||B==="select"||(B==="input"&&y.indexOf(z)<0)))||(k.indexOf(A)>-1)){}else{n(D)}}if(D==="keyboard"){h(A)}}function n(z){d=z;i.setAttribute("data-whatinput",d);if(o.indexOf(d)===-1){o.push(d)}}function x(z){return(z.keyCode)?z.keyCode:z.which}function w(z){return z.target||z.srcElement}function u(z){if(typeof z.pointerType==="number"){return r[z.pointerType]}else{return(z.pointerType==="pen")?"touch":z.pointerType}}function h(z){if(c.indexOf(l[z])===-1&&l[z]){c.push(l[z])}}function p(B){var A=x(B);var z=c.indexOf(l[A]);if(z!==-1){c.splice(z,1)}}function b(){i=document.body;if(window.PointerEvent){i.addEventListener("pointerdown",a);i.addEventListener("pointermove",a)}else{if(window.MSPointerEvent){i.addEventListener("MSPointerDown",a);i.addEventListener("MSPointerMove",a)}else{i.addEventListener("mousedown",a);i.addEventListener("mousemove",a);if("ontouchstart" in window){i.addEventListener("touchstart",g)}}}i.addEventListener(v,a);i.addEventListener("keydown",f);i.addEventListener("keyup",f);document.addEventListener("keyup",p)}function e(){return v="onwheel" in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll"}if("addEventListener" in window&&Array.prototype.indexOf){if(document.body){b()}else{document.addEventListener("DOMContentLoaded",b)}}return{ask:function(){return d},keys:function(){return c},types:function(){return o},set:n}}());